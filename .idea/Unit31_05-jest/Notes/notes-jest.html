




<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Testing with Jest</title>

  <link rel="stylesheet" href="_static/pygments.css" type="text/css"/>
  <link rel="stylesheet" href="_static/handouts-sphinx.css"/>


  <link href='https://fonts.googleapis.com/css?family=Roboto:400,600,700,400italic,600italic,700italic|Source+Code+Pro:400,700'
        rel='stylesheet' type='text/css'>

</head>
<body>
<div id="page-wrapper">
  <div id="page-sidebar">
    <header>
      <p class="project">Springboard</p>

      <p class="title">Testing with Jest</p>

      <p class="backlink"><a href="index.html"> &laquo; Back to Homepage</a></p>

    </header>
    <div id="toc">
      <ul>
        <li><a class="reference internal" href="index.html#">Testing with Jest</a><ul>
          <li><a class="reference internal" href="index.html#goals">Goals</a><ul>
            <li><a class="reference internal" href="index.html#id1">Goals</a></li>
          </ul>
          </li>
          <li><a class="reference internal" href="index.html#an-introduction-to-jest">An Introduction to Jest</a><ul>
            <li><a class="reference internal" href="index.html#jest">Jest</a></li>
            <li><a class="reference internal" href="index.html#installing-jest">Installing Jest</a></li>
          </ul>
          </li>
          <li><a class="reference internal" href="index.html#organizing-tests">Organizing Tests</a><ul>
            <li><a class="reference internal" href="index.html#id2">Organizing Tests</a></li>
            <li><a class="reference internal" href="index.html#test">Test</a></li>
            <li><a class="reference internal" href="index.html#describe">Describe</a></li>
          </ul>
          </li>
          <li><a class="reference internal" href="index.html#expectations">Expectations</a><ul>
            <li><a class="reference internal" href="index.html#id3">Expectations</a></li>
            <li><a class="reference internal" href="index.html#matchers">Matchers</a></li>
            <li><a class="reference internal" href="index.html#matchers-in-action">Matchers in action</a></li>
            <li><a class="reference internal" href="index.html#expecting-anything">Expecting Anything</a></li>
          </ul>
          </li>
          <li><a class="reference internal" href="index.html#before-after">Before / After</a><ul>
            <li><a class="reference internal" href="index.html#demo-shopping-cart-totals">Demo: Shopping Cart Totals</a></li>
            <li><a class="reference internal" href="index.html#id4">Before / After</a></li>
          </ul>
          </li>
        </ul>
        </li>
      </ul>

    </div>
  </div>
  <div id="page-content">

    <div class="section" id="testing-with-jest">
      <h1>Testing with Jest</h1>
      <div class="section" id="goals">
        <h2>Goals</h2>
        <p><a class="reference external" href="../node-jest-testing-demo.zip">Download Demo Code</a></p>
        <div class="section" id="id1">
          <div class="docutils container">
            <ul class="simple">
              <li>Write unit tests using Jest</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="section" id="an-introduction-to-jest">
        <h2>An Introduction to Jest</h2>
        <div class="section" id="jest">
          <h3>Jest</h3>
          <div class="docutils container">
            <ul class="simple">
              <li>Jest is an open-source testing platform written by Facebook</li>
              <li>It’s built on top of Jasmine!</li>
              <li>Easy to test in environments that aren’t browser-based</li>
              <li>Also very popular for testing React apps</li>
              <li>More information: <a class="reference external" href="https://jestjs.io/">Jestjs.io</a></li>
            </ul>
          </div>
        </div>
        <div class="section" id="installing-jest">
          <h3>Installing Jest</h3>
          <pre class="console literal-block">
$ <span class="cmd">npm i --global jest</span>
</pre>
          <div class="docutils container">
            <p>This installs jest globally so you can use it anywhere</p>
          </div>
        </div>
      </div>
      <div class="section" id="organizing-tests">
        <h2>Organizing Tests</h2>
        <div class="section" id="id2">
          <div class="docutils container">
            <ul class="simple">
              <li>Test files should be named <cite>NAME_OF_FILE.test.js</cite><ul>
                <li>You can place in the same directory as the JS file it tests</li>
                <li>Or, you can organize all tests into a folder called <cite>__tests__</cite></li>
              </ul>
              </li>
              <li>If you have a <cite>package.json</cite>, you don’t need additional configuration.<ul>
                <li>If not, create <cite>jest.config.js</cite> file. It can be empty, you just need one.</li>
              </ul>
              </li>
              <li>Run all tests using the command <cite>jest</cite><ul>
                <li>You can run an individual test using <cite>jest NAME_OF_FILE</cite></li>
              </ul>
              </li>
            </ul>
          </div>
        </div>
        <div class="section" id="test">
          <h3>Test</h3>
          <p>Write tests inside of <cite>test</cite> function callbacks:</p>
          <div class="compare compare23 docutils container">
            <div class="docutils container">
              <div class="literal-block-wrapper docutils container" id="id5">
                <div class="code-block-caption"><span class="caption-text">demo/add.js</span></div>
                <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>


<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span><span class="nx">add</span><span class="p">};</span>
</pre></div>
                </div>
              </div>
            </div>
            <div class="docutils container">
              <div class="literal-block-wrapper docutils container" id="id6">
                <div class="code-block-caption"><span class="caption-text">demo/add.test.js</span></div>
                <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">add</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./add&quot;</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s1">&#39;add should return sum&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">sum</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="section" id="describe">
          <h3>Describe</h3>
          <p>To group together related tests, wrap these in <cite>describe</cite> callback:</p>
          <div class="compare compare23 docutils container">
            <div class="docutils container">
              <div class="literal-block-wrapper docutils container" id="id7">
                <div class="code-block-caption"><span class="caption-text">demo/add.js</span></div>
                <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>


<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span><span class="nx">add</span><span class="p">};</span>
</pre></div>
                </div>
              </div>
            </div>
            <div class="docutils container">
              <div class="literal-block-wrapper docutils container" id="id8">
                <div class="code-block-caption"><span class="caption-text">demo/add.test.js</span></div>
                <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;add function&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

  <span class="nx">test</span><span class="p">(</span><span class="s1">&#39;return sum&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">sum</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="s1">&#39;return sum with neg numbers&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">sum</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">});</span>
</pre></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="section" id="expectations">
        <h2>Expectations</h2>
        <div class="section" id="id3">
          <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">expect</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
          </div>
          <p>Expectations should go inside of <cite>test</cite> function callbacks</p>
          <p>A function can have several expectations — <span class="raw-reveal"><br></span>
            but be thoughtful about keeping tests small and simple.</p>
        </div>
        <div class="section" id="matchers">
          <h3>Matchers</h3>
          <dl class="docutils">
            <dt><code class="docutils literal notranslate"><span class="pre">.toEqual(obj)</span></code></dt><dd>Has the same value (eg, different objects with same values match)</dd>
            <dt><code class="docutils literal notranslate"><span class="pre">.toBe(obj)</span></code></dt><dd>Is the same object (eg, different objects with same values do not)</dd>
            <dt><code class="docutils literal notranslate"><span class="pre">.toContain(sought)</span></code></dt><dd>Does object/array contain this item?</dd>
            <dt><code class="docutils literal notranslate"><span class="pre">.not.</span></code></dt><dd>Add before matcher to invert (eg <code class="docutils literal notranslate"><span class="pre">expect(&quot;hi&quot;).not.toEqual(&quot;bye&quot;)</span></code>)</dd>
          </dl>
          <p><a class="reference external" href="https://jestjs.io/docs/en/using-matchers">https://jestjs.io/docs/en/using-matchers</a></p>
        </div>
        <div class="section" id="matchers-in-action">
          <h3>Matchers in action</h3>
          <div class="docutils container">
            <p>Let’s compare <cite>toBe</cite> and <cite>toEqual</cite></p>
            <div class="literal-block-wrapper docutils container" id="id9">
              <div class="code-block-caption"><span class="caption-text">matchers.test.js</span></div>
              <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;matchers&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">test</span><span class="p">(</span><span class="s2">&quot;toBe and toEqual are different&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
    <span class="kd">let</span> <span class="nx">newNums</span> <span class="o">=</span> <span class="nx">nums</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">nums</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toBe</span><span class="p">(</span><span class="nx">newNums</span><span class="p">);</span>  <span class="c1">// not the same reference!</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">nums</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">newNums</span><span class="p">);</span>   <span class="c1">// same values so we use toEqual</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
              </div>
            </div>
          </div>
        </div>
        <div class="section" id="expecting-anything">
          <h3>Expecting Anything</h3>
          <p>Sometimes, you’re not sure what part of an object will be.</p>
          <p>Use <cite>expect.any(type)</cite> and it will match any of that type.</p>
          <div class="compare docutils container">
            <div class="docutils container">
              <div class="literal-block-wrapper docutils container" id="id10">
                <div class="code-block-caption"><span class="caption-text">demo/any.js</span></div>
                <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">TOYS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;doll&quot;</span><span class="p">,</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="s2">&quot;iPad&quot;</span><span class="p">];</span>

<span class="kd">function</span> <span class="nx">getRandomToy</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">idx</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span>
      <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">TOYS</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">toy</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="nx">TOYS</span><span class="p">[</span><span class="nx">idx</span><span class="p">],</span>
      <span class="nx">price</span><span class="o">:</span> <span class="mf">34.99</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span><span class="nx">getRandomToy</span><span class="p">};</span>
</pre></div>
                </div>
              </div>
            </div>
            <div class="docutils container">
              <div class="literal-block-wrapper docutils container" id="id11">
                <div class="code-block-caption"><span class="caption-text">demo/any.test.js</span></div>
                <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="p">{</span> <span class="nx">getRandomToy</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;./any&quot;</span><span class="p">);</span>

<span class="nx">test</span><span class="p">(</span><span class="s2">&quot;random toy&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">toy</span> <span class="o">=</span> <span class="nx">getRandomToy</span><span class="p">();</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">toy</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">({</span>
    <span class="nx">toy</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">name</span><span class="o">:</span> <span class="nx">expect</span><span class="p">.</span><span class="nx">any</span><span class="p">(</span><span class="nb">String</span><span class="p">),</span>
      <span class="nx">price</span><span class="o">:</span> <span class="mf">34.99</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="section" id="before-after">
        <h2>Before / After</h2>
        <div class="section" id="demo-shopping-cart-totals">
          <h3>Demo: Shopping Cart Totals</h3>
          <p>We have a shopping cart system with function to test:</p>
          <p><cite>getCartTotal(cart, discount=0)</cite></p>
          <div class="literal-block-wrapper docutils container" id="id12">
            <div class="code-block-caption"><span class="caption-text">demo/cart.test.js</span></div>
            <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;getCartTotal&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">test</span><span class="p">(</span><span class="s2">&quot;get total w/o discount&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">cart</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;le croix&quot;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">4.99</span><span class="p">,</span>
      <span class="nx">qty</span><span class="o">:</span> <span class="mi">3</span> <span class="p">},</span>

      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;pretzels&quot;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">8.99</span><span class="p">,</span>
      <span class="nx">qty</span><span class="o">:</span> <span class="mi">10</span> <span class="p">},</span>
    <span class="p">];</span>

    <span class="kr">const</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">getCartTotal</span><span class="p">(</span><span class="nx">cart</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">total</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">104.87</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="s2">&quot;gets total w/discount&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">cart</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;le croix&quot;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">4.99</span><span class="p">,</span>
      <span class="nx">qty</span><span class="o">:</span> <span class="mi">3</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;pretzels&quot;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">8.99</span><span class="p">,</span>
      <span class="nx">qty</span><span class="o">:</span> <span class="mi">10</span> <span class="p">},</span>
    <span class="p">];</span>

    <span class="kr">const</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">getCartTotal</span><span class="p">(</span><span class="nx">cart</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">total</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">52.44</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
            </div>
          </div>
          <div class="compare docutils container">
            <div class="docutils container">
              <p>We can make data in tests:</p>
              <div class="literal-block-wrapper docutils container" id="id13">
                <div class="code-block-caption"><span class="caption-text">demo/cart.test.js</span></div>
                <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;getCartTotal&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">test</span><span class="p">(</span><span class="s2">&quot;get total w/o discount&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">cart</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;le croix&quot;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">4.99</span><span class="p">,</span>
      <span class="nx">qty</span><span class="o">:</span> <span class="mi">3</span> <span class="p">},</span>

      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;pretzels&quot;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">8.99</span><span class="p">,</span>
      <span class="nx">qty</span><span class="o">:</span> <span class="mi">10</span> <span class="p">},</span>
    <span class="p">];</span>

    <span class="kr">const</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">getCartTotal</span><span class="p">(</span><span class="nx">cart</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">total</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">104.87</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="s2">&quot;gets total w/discount&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">cart</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;le croix&quot;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">4.99</span><span class="p">,</span>
      <span class="nx">qty</span><span class="o">:</span> <span class="mi">3</span> <span class="p">},</span>
      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;pretzels&quot;</span><span class="p">,</span> <span class="nx">price</span><span class="o">:</span> <span class="mf">8.99</span><span class="p">,</span>
      <span class="nx">qty</span><span class="o">:</span> <span class="mi">10</span> <span class="p">},</span>
    <span class="p">];</span>

    <span class="kr">const</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">getCartTotal</span><span class="p">(</span><span class="nx">cart</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">total</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">52.44</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
                </div>
              </div>
            </div>
            <div class="docutils container">
              <p>Can factor out common setup:</p>
              <div class="literal-block-wrapper docutils container" id="id14">
                <div class="code-block-caption"><span class="caption-text">demo/cart.test.js</span></div>
                <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;getCartTotal&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="c1">// will hold the cart for the tests</span>
<span class="hll">  <span class="kd">let</span> <span class="nx">cart</span><span class="p">;</span>
</span><span class="hll">
</span><span class="hll">  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="hll">    <span class="nx">cart</span> <span class="o">=</span> <span class="p">[</span>
</span><span class="hll">      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;le croix&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="nx">price</span><span class="o">:</span> <span class="mf">4.99</span><span class="p">,</span> <span class="nx">qty</span><span class="o">:</span> <span class="mi">3</span> <span class="p">},</span>
</span><span class="hll">      <span class="p">{</span> <span class="nx">item</span><span class="o">:</span> <span class="s2">&quot;pretzels&quot;</span><span class="p">,</span>
</span><span class="hll">      <span class="nx">price</span><span class="o">:</span> <span class="mf">8.99</span><span class="p">,</span> <span class="nx">qty</span><span class="o">:</span> <span class="mi">10</span> <span class="p">}</span>
</span>    <span class="p">];</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="s2">&quot;gets total w/o discount&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">getCartTotal</span><span class="p">(</span><span class="nx">cart</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">total</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">104.87</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">test</span><span class="p">(</span><span class="s2">&quot;gets total w/discount&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">getCartTotal</span><span class="p">(</span><span class="nx">cart</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">total</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mf">52.44</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="section" id="id4">
          <h3>Before / After</h3>
          <p>Jest gives us <em>hooks</em> we can tap into so to not repeat common setup/teardown:</p>
          <div class="docutils container">
            <ul class="simple">
              <li>For one-time setup/teardown:<ul>
                <li><cite>beforeAll</cite>: run before all tests start</li>
                <li><cite>afterAll</cite>: run after all tests finish</li>
              </ul>
              </li>
              <li>For frequent setup/teardown:<ul>
                <li><cite>beforeEach</cite>: run before each test starts</li>
                <li><cite>afterEach</cite>: run before teach test finish</li>
              </ul>
              </li>
            </ul>
          </div>
          <div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;my set of tests&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">beforeAll</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Run before all tests&quot;</span><span class="p">)</span>
  <span class="p">})</span>

  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Run before each it&quot;</span><span class="p">)</span>
  <span class="p">})</span>

  <span class="nx">afterEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Run after each it&quot;</span><span class="p">)</span>
  <span class="p">})</span>

  <span class="nx">afterAll</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Run after all tests&quot;</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">});</span>
</pre></div>
          </div>
          <p>Can put these directly in file (outside of functions) <span class="raw-reveal"><br></span>
            to run before/after any/all tests in entire file.</p>
        </div>
      </div>
    </div>



  </div>
</div>
<script type="text/javascript" src="http://curric.rithmschool.com/springboard/lectures/node-jest-testing/_static/jquery.js"></script>
<script type="text/javascript" src="http://curric.rithmschool.com/springboard/lectures/node-jest-testing/_static/underscore.js"></script>
<script type="text/javascript" src="http://curric.rithmschool.com/springboard/lectures/node-jest-testing/_static/doctools.js"></script>
<script type="text/javascript" src="http://curric.rithmschool.com/springboard/lectures/node-jest-testing/_static/language_data.js"></script>
</body>
</html>